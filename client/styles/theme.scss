/**
 * Media Luna 主题样式
 * 二次元/波普/新拟态风格 - 奶龙黄色主题
 *
 * 使用方法：在组件中 @use '../styles/theme.scss';
 */

/* ============ 主题变量 ============ */
/* 变量定义在 .ml-app 内，确保不影响全局 */
.ml-app {
  /*
   * [Default Theme - Pop/Nailong]
   * Bright, Cheerful, Yellow/Brown
   */
  --ml-primary: #fbbf24;
  --ml-primary-dark: #d97706;
  --ml-primary-light: #fde68a;

  --ml-bg: #fffbeb;
  --ml-bg-alt: #fef3c7;
  --ml-surface: #ffffff;

  --ml-text: #451a03;
  --ml-text-secondary: #78350f;
  --ml-text-muted: #92400e;

  /* Header Background (Glassmorphism base) */
  --ml-header-bg: rgba(255, 251, 235, 0.8);
  /* Cream alpha */

  /* Borders & Shadows */
  --ml-border-width: 3px;
  --ml-border-color: #451a03;
  --ml-border: var(--ml-border-width) solid var(--ml-border-color);
  --ml-shadow: 4px 4px 0 var(--ml-border-color);
  --ml-shadow-sm: 2px 2px 0 var(--ml-border-color);
  --ml-shadow-lg: 6px 6px 0 var(--ml-border-color);
  --ml-radius-sm: 8px;
  --ml-radius: 12px;
  --ml-radius-lg: 16px;
  --ml-radius-xl: 20px;

  /* Status Colors */
  --ml-success: #10b981;
  --ml-success-bg: #dcfce7;
  --ml-success-border: #10b981;
  --ml-success-light: #dcfce7;
  --ml-warning: #f97316;
  --ml-warning-bg: #ffedd5;
  --ml-warning-border: #f97316;
  --ml-error: #ef4444;
  --ml-error-bg: #fee2e2;
  --ml-error-border: #ef4444;
  --ml-danger: #ef4444;
  --ml-info: #3b82f6;
  --ml-info-bg: #dbeafe;
  --ml-info-border: #3b82f6;

  /* Animation */
  --ml-transition: 0.1s ease;

  /* Misc */
  --ml-cream: #fef3c7;
}

/* 
 * [Theme - Sakura (Pink)]
 * Sweet, Soft, Romantic
 */
.theme-sakura {
  --ml-primary: #f472b6;
  /* Pink 400 */
  --ml-primary-dark: #db2777;
  /* Pink 600 */
  --ml-primary-light: #fce7f3;
  /* Pink 100 */

  --ml-bg: #fff1f2;
  /* Rose 50 */
  --ml-bg-alt: #ffe4e6;
  /* Rose 100 */
  --ml-surface: #ffffff;

  --ml-text: #4c0519;
  /* Rose 950 (Almost Black) */
  --ml-text-secondary: #9f1239;
  /* Rose 800 */
  --ml-text-muted: #be123c;
  /* Rose 700 */

  --ml-header-bg: rgba(255, 241, 242, 0.8);
  /* Rose 50 alpha */

  --ml-border-color: #f43f5e;
  /* Rose 500 */
  /* Keep standard border width/shadows of Pop theme */
}

/* 
 * [Theme - Matcha (Green)]
 * Natural, Fresh, Relaxing
 */
.theme-matcha {
  --ml-primary: #84cc16;
  /* Lime 500 */
  --ml-primary-dark: #4d7c0f;
  /* Lime 700 */
  --ml-primary-light: #ecfccb;
  /* Lime 100 */

  --ml-bg: #f7fee7;
  /* Lime 50 */
  --ml-bg-alt: #d9f99d;
  /* Lime 200 */
  --ml-surface: #ffffff;

  --ml-text: #052e16;
  /* Green 950 (Almost Black) */
  --ml-text-secondary: #166534;
  /* Green 800 */
  --ml-text-muted: #15803d;
  /* Green 700 */

  --ml-header-bg: rgba(247, 254, 231, 0.8);
  /* Lime 50 alpha */

  --ml-border-color: #65a30d;
  /* Lime 600 */
  /* Keep standard border width/shadows of Pop theme */
}

/*
 * [Theme - Manga/Ink (Black & White)]
 * High Contrast, Comic Book Style
 */
.theme-manga {
  /* Primary Button: White background with Black border (Outline style) */
  --ml-primary: #ffffff;
  --ml-primary-dark: #000000;
  /* Hover/Active turns Black */
  --ml-primary-light: #e5e5e5;

  --ml-bg: #ffffff;
  --ml-bg-alt: #f4f4f5;
  --ml-surface: #ffffff;

  --ml-text: #000000;
  --ml-text-secondary: #404040;
  --ml-text-muted: #737373;

  --ml-header-bg: rgba(255, 255, 255, 0.9);

  --ml-border-color: #000000;
}

/* Manga Theme Button Override: Invert on Hover */
.theme-manga .pop-btn.primary:hover {
  background: var(--ml-primary-dark);
  /* Black */
  color: #ffffff;
}

/*
 * [Theme - Plain (朴素模式)]
 * 简洁、无特效阴影、直线框
 * 适合喜欢简约风格的用户
 */
.theme-plain {
  /* 去除波普风格的粗边框和阴影 */
  --ml-border-width: 1px;
  --ml-shadow: none;
  --ml-shadow-sm: none;
  --ml-shadow-lg: none;

  /* 使用更小的圆角 */
  --ml-radius-sm: 4px;
  --ml-radius: 6px;
  --ml-radius-lg: 8px;
  --ml-radius-xl: 10px;

  /* 更快的过渡 */
  --ml-transition: 0.15s ease;
}

/* 朴素模式下禁用 hover 变换效果 */
.theme-plain .pop-card:hover,
.theme-plain .pop-btn:hover,
.theme-plain .filter-tag:hover,
.theme-plain .item-card:hover,
.theme-plain .upload-area:hover,
.theme-plain .image-preview {
  transform: none !important;
}

/* 朴素模式下的卡片 */
.theme-plain .pop-card {
  box-shadow: none;
  border-width: 1px;
}

.theme-plain .pop-card:hover {
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
}

/* 朴素模式下的按钮 */
.theme-plain .pop-btn {
  box-shadow: none;
  border-width: 1px;
}

.theme-plain .pop-btn:hover {
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.theme-plain .pop-btn:active {
  transform: none;
  box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);
}

/* 朴素模式下的表单元素 */
.theme-plain .pop-input,
.theme-plain .pop-select,
.theme-plain .pop-textarea {
  border-width: 1px;
}

/* 朴素模式下的徽章 */
.theme-plain .pop-badge,
.theme-plain .status-badge {
  border-width: 1px;
  box-shadow: none;
}

/* 朴素模式下去除点阵背景 */
.theme-plain.ml-app,
.theme-plain .ml-app {
  background-image: none;
}

/*
 * [Theme - Material (Strict Grayscale/Flat)]
 * Black, White, Gray Only. No Pop effects.
 */
.theme-material {
  /* Monochrome Palette */
  --ml-primary: #212121;
  /* Grey 900 */
  --ml-primary-dark: #000000;
  /* Black */
  --ml-primary-light: #e0e0e0;
  /* Grey 300 */

  --ml-bg: #f5f5f5;
  /* Grey 100 */
  --ml-bg-alt: #ffffff;
  /* White */
  --ml-surface: #ffffff;

  --ml-text: #212121;
  /* Grey 900 */
  --ml-text-secondary: #616161;
  /* Grey 700 */
  --ml-text-muted: #9e9e9e;
  /* Grey 500 */

  --ml-header-bg: rgba(255, 255, 255, 0.95);

  /* Flat Borders */
  --ml-border-width: 1px;
  --ml-border-color: #e0e0e0;
  /* Grey 300 */

  /* No Shadows */
  --ml-shadow: none;
  --ml-shadow-sm: none;
  --ml-shadow-lg: none;

  /* Standard Radius */
  --ml-radius-sm: 4px;
  --ml-radius: 4px;
  --ml-radius-lg: 4px;
  --ml-radius-xl: 4px;

  /* Faster Transition */
  --ml-transition: 0.2s ease;

  /* Grayscale Status Colors */
  --ml-success: #616161;
  --ml-success-bg: #eeeeee;
  --ml-success-border: #bdbdbd;

  --ml-warning: #757575;
  --ml-warning-bg: #fafafa;
  --ml-warning-border: #bdbdbd;

  --ml-error: #424242;
  --ml-error-bg: #eeeeee;
  --ml-error-border: #9e9e9e;

  --ml-info: #616161;
  --ml-info-bg: #eeeeee;
  --ml-info-border: #bdbdbd;

  --ml-cream: #f5f5f5;
}

/* Material Theme Overrides */
.theme-material .pop-btn.primary {
  color: #ffffff;
}

/* Disable hover transforms for Material theme */
.theme-material .pop-card:hover,
.theme-material .pop-btn:hover,
.theme-material .filter-tag:hover,
.theme-material .item-card:hover,
.theme-material .upload-area:hover,
.theme-material .image-preview {
  transform: none !important;
}

/* Material Card Overrides */
.theme-material .pop-card {
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12);
  border: 1px solid var(--ml-border-color);
}

.theme-material .pop-card:hover {
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.16);
}

/* Material Button Overrides */
.theme-material .pop-btn {
  box-shadow: none;
  border: 1px solid var(--ml-border-color);
  border-radius: 4px;
  text-transform: uppercase;
  /* Material Design style */
  font-weight: 500;
  letter-spacing: 0.5px;
}

.theme-material .pop-btn:hover {
  background-color: rgba(0, 0, 0, 0.05);
  box-shadow: none;
}

.theme-material .pop-btn.primary:hover {
  background-color: var(--ml-primary-dark);
}

.theme-material .pop-btn:active {
  transform: none;
  background-color: rgba(0, 0, 0, 0.1);
}

/* Material Inputs */
.theme-material .pop-input,
.theme-material .pop-select,
.theme-material .pop-textarea {
  border: 1px solid #bdbdbd;
  border-radius: 4px;
  background: #fafafa;
}

.theme-material .pop-input:focus,
.theme-material .pop-select:focus,
.theme-material .pop-textarea:focus {
  border-color: var(--ml-primary);
  box-shadow: none;
  background: #ffffff;
}

/* Remove dot pattern background */
.theme-material.ml-app,
.theme-material .ml-app {
  background-image: none;
}

/* ============ Material Refinements (User Request) ============ */

/* 1. Selection Highlight (Blue Border, No Black BG) */
.theme-material .pop-btn.active,
.theme-material .nav-tab.active,
.theme-material .group-btn.active {
  background-color: transparent !important;
  color: #2196F3 !important;
  /* Material Blue */
  border-color: #2196F3 !important;
  border-width: 2px !important;
  box-shadow: none !important;
}

/* 2. Toggle Switch Overrides */
/* 
 * Since switches are often scoped, we use deep selectors or global override 
 * targeting the structure: .toggle-switch input + .toggle-slider 
 */
.theme-material .toggle-switch .toggle-slider {
  background-color: #e0e0e0 !important;
  /* Gray when off */
  border-color: #bdbdbd !important;
}

.theme-material .toggle-switch input:checked+.toggle-slider {
  background-color: #4CAF50 !important;
  /* Green when on */
  border-color: #4CAF50 !important;
}

.theme-material .toggle-switch .toggle-slider::before {
  background-color: #ffffff !important;
  /* White knob */
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
  /* Subtle shadow for knob */
}

/* Adjust knob position if needed */
.theme-material .toggle-switch input:checked+.toggle-slider::before {
  background-color: #ffffff !important;
}

/* Ensure switch wrapper has no extra borders */
.theme-material .toggle-switch {
  border: none !important;
}



/* ============ 基础容器 ============ */
.ml-app {
  width: 100%;
  min-height: 100%;
  font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", sans-serif;
  color: var(--ml-text);
  background-color: var(--ml-bg);
  font-size: 14px;
  line-height: 1.5;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;

  /* 点阵纹理背景 */
  background-image:
    radial-gradient(var(--ml-primary-light) 1px, transparent 1px),
    radial-gradient(var(--ml-primary-light) 1px, transparent 1px);
  background-size: 20px 20px;
  background-position: 0 0, 10px 10px;

  /* ============ 波普卡片 ============ */
  .pop-card {
    background: var(--ml-surface);
    border: var(--ml-border);
    /* Hand-drawn organic shape */
    border-radius: 16px 8px 18px 10px / 14px 18px 12px 16px;
    box-shadow: var(--ml-shadow);
    transition: transform var(--ml-transition), box-shadow var(--ml-transition);
  }

  .pop-card:hover {
    transform: translate(-2px, -2px);
    box-shadow: var(--ml-shadow-lg);
  }

  .pop-card.no-hover:hover {
    transform: none;
    box-shadow: var(--ml-shadow);
  }

  /* ============ 波普按钮 ============ */
  .pop-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding: 10px 20px;
    border: var(--ml-border);
    /* Hand-drawn organic shape */
    border-radius: 8px 12px 6px 14px / 12px 6px 14px 8px;
    background: var(--ml-surface);
    color: var(--ml-text);
    font-weight: 800;
    font-size: 14px;
    cursor: pointer;
    box-shadow: var(--ml-shadow-sm);
    transition: all var(--ml-transition);
    user-select: none;
    white-space: nowrap;
  }

  .pop-btn:hover {
    transform: translate(-1px, -1px);
    box-shadow: var(--ml-shadow-lg);
  }

  .pop-btn:active {
    transform: translate(1px, 1px);
    box-shadow: var(--ml-shadow-sm);
  }

  .pop-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    transform: none !important;
  }

  /* 按钮变体 */
  .pop-btn.primary {
    background: var(--ml-primary);
  }

  .pop-btn.secondary {
    background: var(--ml-bg-alt);
    color: var(--ml-text-muted);
  }

  .pop-btn.secondary:hover {
    background: var(--ml-cream);
    color: var(--ml-text);
  }

  .pop-btn.active {
    background: var(--ml-primary);
  }

  .pop-btn.success {
    background: var(--ml-success-bg);
    color: #15803d;
    border-color: var(--ml-success);
    box-shadow: 2px 2px 0 var(--ml-success);
  }

  .pop-btn.warning {
    background: var(--ml-warning-bg);
    color: #c2410c;
    border-color: var(--ml-warning);
    box-shadow: 2px 2px 0 var(--ml-warning);
  }

  .pop-btn.danger {
    background: var(--ml-error-bg);
    color: #b91c1c;
    border-color: var(--ml-error);
    box-shadow: 2px 2px 0 var(--ml-error);
  }

  /* 按钮尺寸 */
  .pop-btn.small {
    padding: 4px 12px;
    font-size: 12px;
    border-width: 2px;
    box-shadow: 1px 1px 0 var(--ml-border-color);
  }

  .pop-btn.large {
    padding: 12px 24px;
    font-size: 16px;
  }

  .pop-btn.icon-only {
    padding: 8px;
    width: 36px;
    height: 36px;
  }

  /* ============ 图标按钮 ============ */
  .icon-btn {
    width: 32px;
    height: 32px;
    border-radius: 8px;
    border: var(--ml-border-width, 2px) solid currentColor;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-weight: 800;
    transition: transform 0.1s;
    background: var(--ml-surface);
    color: var(--ml-text);
    border-color: var(--ml-border-color);
  }

  .icon-btn:active {
    transform: scale(0.95);
  }

  .icon-btn.success {
    background: var(--ml-success-bg);
    border-color: var(--ml-success);
    color: #15803d;
  }

  .icon-btn.danger {
    background: var(--ml-error-bg);
    border-color: var(--ml-error);
    color: #b91c1c;
  }

  /* ============ 表单元素 ============ */
  .pop-input,
  .pop-select,
  .pop-textarea {
    padding: 10px 14px;
    border: var(--ml-border-width, 2px) solid var(--ml-border-color);
    /* Hand-drawn organic shape */
    border-radius: 8px 12px 6px 14px / 12px 6px 14px 8px;
    background: var(--ml-surface);
    color: var(--ml-text);
    font-weight: 600;
    font-size: 14px;
    outline: none;
    transition: all 0.2s;
  }

  .pop-input::placeholder,
  .pop-textarea::placeholder {
    color: var(--ml-text-muted);
    font-weight: 400;
  }

  .pop-input:focus,
  .pop-select:focus,
  .pop-textarea:focus {
    border-color: var(--ml-primary);
    box-shadow: 0 0 0 3px var(--ml-primary-light);
  }

  .pop-input:disabled,
  .pop-select:disabled,
  .pop-textarea:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    background: var(--ml-bg);
  }

  .pop-textarea {
    resize: vertical;
    min-height: 80px;
    line-height: 1.5;
    width: 100%;
    box-sizing: border-box;
  }

  .pop-select {
    cursor: pointer;
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23451a03' d='M2 4l4 4 4-4'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 12px center;
    padding-right: 36px;
  }

  /* ============ 搜索框 ============ */
  .pop-search {
    position: relative;
    display: inline-flex;
    align-items: center;
  }

  .pop-search .search-icon {
    position: absolute;
    left: 12px;
    opacity: 0.5;
    font-size: 16px;
    pointer-events: none;
  }

  .pop-search input {
    padding-left: 36px;
  }

  /* ============ 表单项 ============ */
  .form-item {
    margin-bottom: 24px;
  }

  .form-item label {
    display: block;
    font-weight: 800;
    font-size: 14px;
    color: var(--ml-text-secondary);
    margin-bottom: 10px;
  }

  .form-item .hint {
    font-size: 12px;
    color: var(--ml-text-muted);
    margin-top: 6px;
  }

  .form-item input,
  .form-item select,
  .form-item textarea {
    width: 100%;
    box-sizing: border-box;
  }

  .form-row {
    display: flex;
    gap: 24px;
  }

  .form-row .form-item {
    flex: 1;
    min-width: 0;
  }

  /* ============ 复选框 ============ */
  .pop-checkbox {
    display: inline-flex;
    align-items: center;
    gap: 12px;
    cursor: pointer;
    font-weight: 700;
    user-select: none;
    color: var(--ml-text);
  }

  .pop-checkbox input {
    width: 24px;
    height: 24px;
    accent-color: var(--ml-primary);
    cursor: pointer;
    margin: 0;
    flex-shrink: 0;
  }

  /* ============ 状态徽章 ============ */
  .pop-badge {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 4px 10px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: 700;
    border: 2px solid;
  }

  .pop-badge.success {
    background: var(--ml-success-bg);
    border-color: var(--ml-success);
    color: #15803d;
  }

  .pop-badge.warning {
    background: var(--ml-warning-bg);
    border-color: var(--ml-warning);
    color: #c2410c;
  }

  .pop-badge.error {
    background: var(--ml-error-bg);
    border-color: var(--ml-error);
    color: #b91c1c;
  }

  .pop-badge.info {
    background: var(--ml-info-bg);
    border-color: var(--ml-info);
    color: #1d4ed8;
  }

  .pop-badge.default {
    background: #f3f4f6;
    border-color: #e5e7eb;
    color: var(--ml-text-secondary);
  }

  /* ============ 标签 ============ */
  .pop-tag {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 2px 6px;
    font-size: 12px;
    font-weight: 700;
    border-radius: 4px;
    background: #f3f4f6;
    border: 1px solid #e5e7eb;
    white-space: nowrap;
  }

  /* ============ 统计卡片 ============ */
  .stat-card {
    padding: 24px;
    display: flex;
    align-items: center;
    gap: 16px;
  }

  .stat-card .stat-icon {
    font-size: 32px;
  }

  .stat-card .stat-info .label {
    font-size: 14px;
    font-weight: 700;
    color: var(--ml-text-secondary);
    margin-bottom: 4px;
  }

  .stat-card .stat-info .value {
    font-size: 28px;
    font-weight: 900;
    color: var(--ml-text);
    line-height: 1;
  }

  .stat-card.primary {
    background: #fffbeb;
  }

  .stat-card.info {
    background: #eff6ff;
  }

  .stat-card.success {
    background: #f0fdf4;
  }

  .stat-card.warning {
    background: #fff7ed;
  }

  /* ============ 表格 ============ */
  .pop-table {
    width: 100%;
    border-collapse: collapse;
  }

  .pop-table th {
    text-align: left;
    padding: 16px 24px;
    background: #fff7ed;
    border-bottom: 2px solid var(--ml-border-color);
    font-weight: 800;
    font-size: 13px;
    color: var(--ml-text-secondary);
    white-space: nowrap;
  }

  .pop-table td {
    padding: 16px 24px;
    border-bottom: 2px solid var(--ml-bg-alt);
    font-weight: 600;
    vertical-align: middle;
  }

  .pop-table tbody tr {
    transition: background 0.1s;
  }

  .pop-table tbody tr:hover td {
    background: var(--ml-bg);
  }

  .pop-table tbody tr:last-child td {
    border-bottom: none;
  }

  .table-card {
    padding: 0;
    overflow: hidden;
  }

  /* ============ 空状态 ============ */
  .empty-state {
    text-align: center;
    padding: 60px 20px;
  }

  .empty-state .emoji {
    font-size: 48px;
    margin-bottom: 16px;
    display: block;
  }

  .empty-state .title,
  .empty-state p {
    font-weight: 700;
    color: var(--ml-text-secondary);
  }

  /* ============ 加载状态 ============ */
  .loading-state {
    text-align: center;
    padding: 60px 20px;
    font-weight: 700;
    color: var(--ml-text-secondary);
  }

  /* ============ 弹窗 ============ */
  .modal-mask {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(69, 26, 3, 0.6);
    backdrop-filter: blur(4px);
    z-index: 1000;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .modal-box {
    width: 520px;
    max-width: 95%;
    max-height: 90vh;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  }

  @keyframes popIn {
    from {
      opacity: 0;
      transform: scale(0.8) translateY(20px);
    }

    to {
      opacity: 1;
      transform: scale(1) translateY(0);
    }
  }

  .modal-head {
    flex-shrink: 0;
    padding: 20px 32px;
    border-bottom: 2px solid var(--ml-bg);
    background: #fff7ed;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .modal-head h3 {
    margin: 0;
    font-size: 20px;
    font-weight: 900;
  }

  .modal-head .close-btn {
    cursor: pointer;
    font-size: 24px;
    font-weight: 800;
    color: var(--ml-text-secondary);
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 8px;
    transition: all 0.2s;
  }

  .modal-head .close-btn:hover {
    color: var(--ml-text);
    background: rgba(0, 0, 0, 0.05);
  }

  .modal-content {
    flex: 1;
    padding: 32px;
    overflow-y: auto;
    /* 隐藏式滚动条 */
    scrollbar-width: thin;
    scrollbar-color: transparent transparent;
  }

  .modal-content:hover {
    scrollbar-color: var(--ml-border-color) transparent;
  }

  .modal-content::-webkit-scrollbar {
    width: 6px;
  }

  .modal-content::-webkit-scrollbar-track {
    background: transparent;
  }

  .modal-content::-webkit-scrollbar-thumb {
    background-color: transparent;
    border-radius: 3px;
  }

  .modal-content:hover::-webkit-scrollbar-thumb {
    background-color: var(--ml-border-color);
  }

  .modal-foot {
    flex-shrink: 0;
    padding: 24px 32px;
    background: var(--ml-bg);
    border-top: 2px solid var(--ml-border-color);
    display: flex;
    justify-content: flex-end;
    gap: 16px;
  }

  /* ============ 分页 ============ */
  .pagination {
    display: flex;
    align-items: center;
    justify-content: flex-end;
    gap: 12px;
    padding: 20px;
    border-top: 2px solid var(--ml-bg-alt);
    font-weight: 700;
  }

  /* ============ 网格布局 ============ */
  .pop-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 24px;
  }

  /* ============ 统计网格 ============ */
  .stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
    margin-bottom: 32px;
  }

  /* ============ 工具栏 ============ */
  .toolbar {
    display: flex;
    align-items: center;
    gap: 16px;
    margin-bottom: 24px;
    flex-wrap: wrap;
  }

  .toolbar .spacer {
    flex: 1;
  }

  .filter-bar {
    padding: 20px;
    display: flex;
    align-items: center;
    gap: 16px;
    flex-wrap: wrap;
    margin-bottom: 24px;
  }

  .filter-bar .spacer {
    flex: 1;
  }

  /* ============ 滚动条 ============ */
  /* ============ 隐藏式滚动条 ============ */
  .pop-scrollbar {
    scrollbar-width: thin;
    scrollbar-color: transparent transparent;
  }

  .pop-scrollbar:hover {
    scrollbar-color: rgba(69, 26, 3, 0.3) transparent;
  }

  .pop-scrollbar::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  .pop-scrollbar::-webkit-scrollbar-track {
    background: transparent;
  }

  .pop-scrollbar::-webkit-scrollbar-thumb {
    background-color: transparent;
    border-radius: 3px;
    transition: background-color 0.3s;
  }

  .pop-scrollbar:hover::-webkit-scrollbar-thumb {
    background-color: rgba(69, 26, 3, 0.3);
  }

  .pop-scrollbar::-webkit-scrollbar-thumb:hover {
    background-color: rgba(69, 26, 3, 0.5);
  }

  /* ============ 链接 ============ */
  .pop-link {
    color: var(--ml-text-secondary);
    font-weight: 700;
    text-decoration: none;
    border-bottom: 2px dashed;
  }

  .pop-link:hover {
    color: var(--ml-text);
    border-style: solid;
  }

  /* ============ 辅助类 ============ */
  .spacer {
    flex: 1;
  }

  .mono {
    font-family: monospace;
    font-size: 14px;
  }

  .amount {
    font-size: 16px;
    font-weight: 800;
  }

  .credits {
    color: var(--ml-primary-dark);
    font-weight: 800;
  }

  .user-badge {
    background: #f3f4f6;
    padding: 4px 8px;
    border-radius: 6px;
    font-size: 13px;
  }

  .time {
    color: var(--ml-text-secondary);
    font-size: 13px;
  }

  .actions {
    display: flex;
    gap: 8px;
    align-items: center;
  }

  /* ============ 瀑布流布局 ============ */
  .ml-masonry {
    columns: 5;
    column-gap: 1rem;
  }

  .ml-masonry-item {
    break-inside: avoid;
    margin-bottom: 1rem;
  }

  @media (max-width: 1400px) {
    .ml-masonry {
      columns: 4;
    }
  }

  @media (max-width: 1100px) {
    .ml-masonry {
      columns: 3;
    }
  }

  @media (max-width: 800px) {
    .ml-masonry {
      columns: 2;
    }
  }

  @media (max-width: 500px) {
    .ml-masonry {
      columns: 1;
    }
  }

  /* ============ 隐藏式滚动条 (兼容旧类名) ============ */
  .ml-scrollbar {
    scrollbar-width: thin;
    scrollbar-color: transparent transparent;
  }

  .ml-scrollbar:hover {
    scrollbar-color: var(--ml-border-color) transparent;
  }

  .ml-scrollbar::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  .ml-scrollbar::-webkit-scrollbar-track {
    background: transparent;
  }

  .ml-scrollbar::-webkit-scrollbar-thumb {
    background-color: transparent;
    border-radius: 3px;
    transition: background-color 0.2s;
  }

  .ml-scrollbar:hover::-webkit-scrollbar-thumb {
    background-color: var(--ml-border-color);
  }
}

.ml-container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 24px;
}

/* ============ 兼容变量 (Koishi) ============ */
.ml-app {
  --ml-cream: #fef3c7;

  /* 兼容 Koishi 变量 */
  --k-color-text: var(--ml-text);
  --k-color-text-description: var(--ml-text-muted);
  --k-color-border: var(--ml-border-color);
  --k-color-bg-1: var(--ml-bg);
  --k-color-bg-2: var(--ml-bg-alt);
  --k-card-bg: var(--ml-surface);
  --k-color-active: var(--ml-primary);
  --k-color-active-bg: var(--ml-primary-light);
  --k-color-success: var(--ml-success);
  --k-color-warning: var(--ml-warning);
  --k-color-error: var(--ml-error);
}

/* ============ Element Plus 组件样式覆盖 ============ */
/* 确保 Element Plus 组件使用我们的主题变量 */
.ml-app {
  /* 基础文字颜色 */
  --el-text-color-primary: var(--ml-text);
  --el-text-color-regular: var(--ml-text);
  --el-text-color-secondary: var(--ml-text-secondary);
  --el-text-color-placeholder: var(--ml-text-muted);
  --el-text-color-disabled: var(--ml-text-muted);

  /* 边框颜色 */
  --el-border-color: var(--ml-border-color);
  --el-border-color-light: var(--ml-border-color);
  --el-border-color-lighter: var(--ml-border-color);
  --el-border-color-extra-light: var(--ml-bg-alt);
  --el-border-color-dark: var(--ml-border-color);
  --el-border-color-darker: var(--ml-border-color);

  /* 背景颜色 */
  --el-bg-color: var(--ml-surface);
  --el-bg-color-page: var(--ml-bg);
  --el-bg-color-overlay: var(--ml-surface);

  /* 填充颜色 */
  --el-fill-color: var(--ml-bg-alt);
  --el-fill-color-light: var(--ml-bg);
  --el-fill-color-lighter: var(--ml-surface);
  --el-fill-color-blank: var(--ml-surface);

  /* 主题色 */
  --el-color-primary: var(--ml-primary-dark);
  --el-color-primary-light-3: var(--ml-primary);
  --el-color-primary-light-5: var(--ml-primary-light);
  --el-color-primary-light-7: var(--ml-primary-light);
  --el-color-primary-light-8: var(--ml-primary-light);
  --el-color-primary-light-9: var(--ml-bg-alt);
  --el-color-primary-dark-2: var(--ml-primary-dark);

  /* 状态颜色 */
  --el-color-success: var(--ml-success);
  --el-color-warning: var(--ml-warning);
  --el-color-danger: var(--ml-error);
  --el-color-error: var(--ml-error);
  --el-color-info: var(--ml-info);

  /* 遮罩颜色 */
  --el-mask-color: rgba(69, 26, 3, 0.6);
  --el-mask-color-extra-light: rgba(69, 26, 3, 0.3);

  /* 输入框 */
  --el-input-text-color: var(--ml-text);
  --el-input-border-color: var(--ml-border-color);
  --el-input-bg-color: var(--ml-surface);
  --el-input-focus-border-color: var(--ml-primary);
  --el-input-placeholder-color: var(--ml-text-muted);

  /* 下拉菜单 */
  --el-dropdown-menuItem-hover-fill: var(--ml-primary-light);
  --el-dropdown-menuItem-hover-color: var(--ml-text);

  /* 开关 */
  --el-switch-on-color: var(--ml-primary);
  --el-switch-off-color: var(--ml-bg-alt);

  /* 滑块 */
  --el-slider-main-bg-color: var(--ml-primary);
  --el-slider-runway-bg-color: var(--ml-bg-alt);

  /* 禁用状态 */
  --el-disabled-text-color: var(--ml-text-muted);
  --el-disabled-bg-color: var(--ml-bg-alt);
  --el-disabled-border-color: var(--ml-border-color);
}

/* Element Plus 组件文字样式修正 */
.ml-app {

  /* 输入框 */
  .el-input__inner,
  .el-textarea__inner {
    color: var(--ml-text) !important;
    font-weight: 600;
  }

  .el-input__inner::placeholder,
  .el-textarea__inner::placeholder {
    color: var(--ml-text-muted) !important;
  }

  /* 下拉选择框 */
  .el-select .el-input__inner {
    color: var(--ml-text) !important;
  }

  .el-select-dropdown__item {
    color: var(--ml-text);
    font-weight: 600;
  }

  .el-select-dropdown__item.hover,
  .el-select-dropdown__item:hover {
    background-color: var(--ml-primary-light);
    color: var(--ml-text);
  }

  .el-select-dropdown__item.selected {
    color: var(--ml-primary-dark);
    font-weight: 700;
  }

  /* 数字输入框 */
  .el-input-number {
    .el-input__inner {
      color: var(--ml-text) !important;
    }
  }

  /* 开关标签 */
  .el-switch__label {
    color: var(--ml-text-muted);
  }

  .el-switch__label.is-active {
    color: var(--ml-text);
  }

  /* 选项组标题 */
  .el-select-group__title {
    color: var(--ml-text-secondary);
    font-weight: 700;
  }

  /* 单选框/复选框 */
  .el-radio__label,
  .el-checkbox__label {
    color: var(--ml-text);
  }

  /* 表单标签 */
  .el-form-item__label {
    color: var(--ml-text-secondary);
    font-weight: 700;
  }

  /* 表格 */
  .el-table {
    --el-table-text-color: var(--ml-text);
    --el-table-header-text-color: var(--ml-text);
    --el-table-row-hover-bg-color: var(--ml-primary-light);
    --el-table-header-bg-color: var(--ml-bg-alt);
    --el-table-bg-color: var(--ml-surface);
    --el-table-tr-bg-color: var(--ml-surface);
    --el-table-border-color: var(--ml-border-color);
  }

  /* 分页 */
  .el-pagination {
    --el-pagination-button-color: var(--ml-text);
    --el-pagination-hover-color: var(--ml-primary-dark);
  }

  /* 消息提示 */
  .el-message {
    --el-message-close-icon-color: var(--ml-text-muted);
  }

  /* 对话框 */
  .el-dialog__title {
    color: var(--ml-text);
    font-weight: 800;
  }

  .el-dialog__body {
    color: var(--ml-text);
  }

  /* Tooltip */
  .el-tooltip__trigger {
    color: var(--ml-text);
  }

  /* 标签页 */
  .el-tabs__item {
    color: var(--ml-text-muted);
  }

  .el-tabs__item.is-active {
    color: var(--ml-primary-dark);
  }

  .el-tabs__item:hover {
    color: var(--ml-text);
  }

  /* 标签 */
  .el-tag {
    --el-tag-text-color: var(--ml-text);
  }

  /* 空状态 */
  .el-empty__description {
    color: var(--ml-text-muted);
  }

  /* 加载状态 */
  .el-loading-text {
    color: var(--ml-text);
  }

  /* ============ Element Plus 弹出层样式 (非 Teleport 模式) ============ */
  /* 使用 :teleported="false" 后，弹出层在 .ml-app 内渲染 */

  /* 下拉菜单弹出层 */
  .el-select-dropdown,
  .el-picker-panel,
  .el-cascader__dropdown,
  .el-autocomplete__popper {
    /* 波普风格边框 */
    border: 2px solid var(--ml-border-color) !important;
    border-radius: var(--ml-radius) !important;
    box-shadow: var(--ml-shadow) !important;
    background: var(--ml-surface) !important;
  }

  .el-select-dropdown__item {
    color: var(--ml-text) !important;
    font-weight: 600;
  }

  .el-select-dropdown__item.hover,
  .el-select-dropdown__item:hover {
    background-color: var(--ml-primary-light) !important;
    color: var(--ml-text) !important;
  }

  .el-select-dropdown__item.selected,
  .el-select-dropdown__item.is-selected {
    color: var(--ml-primary-dark) !important;
    font-weight: 700;
  }

  .el-select-group__title {
    color: var(--ml-text-secondary) !important;
    font-weight: 700;
  }

  /* 下拉菜单 */
  .el-dropdown__popper {
    border: 2px solid var(--ml-border-color) !important;
    border-radius: var(--ml-radius) !important;
    box-shadow: var(--ml-shadow) !important;
    background: var(--ml-surface) !important;
  }

  .el-dropdown-menu__item {
    color: var(--ml-text) !important;
    font-weight: 600;
  }

  .el-dropdown-menu__item:hover {
    background-color: var(--ml-primary-light) !important;
    color: var(--ml-text) !important;
  }

  .el-dropdown-menu__item.is-active {
    color: var(--ml-primary-dark) !important;
    font-weight: 700;
    background-color: var(--ml-primary-light) !important;
  }

  /* 对话框 */
  .el-dialog {
    border: 3px solid var(--ml-border-color) !important;
    border-radius: var(--ml-radius-lg) !important;
    box-shadow: var(--ml-shadow-lg) !important;
  }

  .el-dialog__header {
    background: var(--ml-bg-alt);
    border-bottom: 2px solid var(--ml-border-color);
  }

  .el-dialog__title {
    color: var(--ml-text) !important;
    font-weight: 800;
  }

  .el-dialog__body {
    color: var(--ml-text);
  }

  /* Tooltip */
  .el-tooltip__popper {
    border: 2px solid var(--ml-border-color) !important;
    border-radius: var(--ml-radius-sm) !important;
    box-shadow: var(--ml-shadow-sm) !important;
    background: var(--ml-surface) !important;
    color: var(--ml-text) !important;
    font-weight: 600;
  }

  .el-tooltip__popper.is-dark {
    background: var(--ml-text) !important;
    color: var(--ml-surface) !important;
  }

  /* Popover */
  .el-popover {
    border: 2px solid var(--ml-border-color) !important;
    border-radius: var(--ml-radius) !important;
    box-shadow: var(--ml-shadow) !important;
  }

  .el-popover__title {
    color: var(--ml-text) !important;
    font-weight: 800;
  }
}